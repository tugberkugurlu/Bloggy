tinymce.PluginManager.add("fullscreen",function(e){function n(){var e,n,t=window,i=document,l=i.body;return l.offsetWidth&&(e=l.offsetWidth,n=l.offsetHeight),t.innerWidth&&t.innerHeight&&(e=t.innerWidth,n=t.innerHeight),{w:e,h:n}}function t(){function t(){s.setStyle(d,"height",n().h-(o.clientHeight-d.clientHeight))}var o,d,u,a=document.body,h=document.documentElement;c=!c,o=e.getContainer().firstChild,d=e.getContentAreaContainer().firstChild,u=d.style,c?(i=u.width,l=u.height,u.width=u.height="100%",s.addClass(a,"mce-fullscreen"),s.addClass(h,"mce-fullscreen"),s.addClass(o,"mce-fullscreen"),s.bind(window,"resize",t),t(),r=t):(u.width=i,u.height=l,s.removeClass(a,"mce-fullscreen"),s.removeClass(h,"mce-fullscreen"),s.removeClass(o,"mce-fullscreen"),s.unbind(window,"resize",r)),e.fire("FullscreenStateChanged",{state:c})}var i,l,r,c=!1,s=tinymce.DOM;if(!e.settings.inline)return e.on("init",function(){e.addShortcut("Ctrl+Alt+F","",t)}),e.on("remove",function(){r&&s.unbind(window,"resize",r)}),e.addCommand("mceFullScreen",t),e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Alt+F",selectable:!0,onClick:t,onPostRender:function(){var n=this;e.on("FullscreenStateChanged",function(e){n.active(e.state)})},context:"view"}),e.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Alt+F",onClick:t,onPostRender:function(){var n=this;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}}),{isFullscreen:function(){return c}}});